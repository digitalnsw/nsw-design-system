---
title: Quick exit
page: true
model:  json/quick-exit.json
---

{{#>_layout-container}}
<h3>Variation 1 - Light theme</h3>
<ul class="nsw-m-bottom-md">
<li>Light theme</li>
<li>Cloaks page immediately on activation</li>
<li>Opens Safe URL in a new tab and replaces current tab with Secondary</li>
</ul>

<button class="nsw-button nsw-button--dark"
  data-module="quick-exit"
  data-options='{
    "safeUrl": "{{model.safeUrl}}",
    "secondarySafeUrl": "{{model.secondarySafeUrl}}",
    "title": "{{model.title}}",
    "description": "{{model.description}}",
    "theme": "light",
    "cloakMode": "visibility"
  }'
  type="button"
  aria-expanded="true">Initialise banner</button>

<h3>Variation 2 - Dark theme</h3>
<ul class="nsw-m-bottom-md">
<li>Dark theme</li>
<li>Cloaks page immediately on activation</li>
<li>Opens Safe URL in a new tab and replaces current tab with Secondary</li>
</ul>

<button class="nsw-button nsw-button--dark"
  data-module="quick-exit"
  data-options='{
    "safeUrl": "{{model.safeUrl}}",
    "secondarySafeUrl": "{{model.secondarySafeUrl}}",
    "title": "{{model.title}}",
    "description": "{{model.description}}",
    "theme": "dark",
    "enableEsc": true,
    "cloakMode": "display"
  }'
  type="button"
  aria-expanded="true">Initialise banner</button>

<h3>Variation 3 - New tab</h3>
<ul class="nsw-m-bottom-md">
<li>Light theme</li>
<li>Does not cloak page (cloaking off)</li>
<li>Opens Safe URL in a new tab and also navigates current tab</li>
</ul>
<button class="nsw-button nsw-button--dark"
  data-module="quick-exit"
  data-options='{
    "safeUrl": "{{model.safeUrl}}",
    "secondarySafeUrl": "{{model.secondarySafeUrl}}",
    "title": "{{model.title}}",
    "description": "{{model.description}}",
    "theme": "light",
    "enableEsc": true
  }'
  type="button"
  aria-expanded="true">Initialise banner</button>

<h3>Variation 4 - Declarative (module)</h3>
<ul class="nsw-m-bottom-md">
  <li>Initialises automatically on page load</li>
  <li>Uses <code>data-module="quick-exit"</code> with a compact <code>data-options</code> JSON</li>
</ul>
{{!-- <span
  data-module="quick-exit"
  data-options='{
    "safeUrl": "{{model.safeUrl}}",
    "secondarySafeUrl": "{{model.secondarySafeUrl}}",
    "title": "{{model.title}}",
    "description": "{{model.description}}",
    "theme": "dark",
    "enableEsc": true
  }'>
</span> --}}
<script>
(function () {
  function initFromButton(btn) {
    try {
      var json = btn.getAttribute('data-options');
      var o = json ? JSON.parse(json) : {};
      var enableCloak = true;
      if (o.cloakMode === 'none') enableCloak = false; // legacy mapping

      window.NSW.QuickExit.init({
        safeUrl: o.safeUrl || '{{model.safeUrl}}',
        secondarySafeUrl: o.secondarySafeUrl || '{{model.secondarySafeUrl}}',
        title: o.title || '{{model.title}}',
        description: o.description || '{{model.description}}',
        theme: o.theme || 'light',
        enableEsc: (typeof o.enableEsc === 'boolean') ? o.enableEsc : true,
        enableCloak: enableCloak,
        exitLabel: o.exitLabel || 'Exit now'
      });
    } catch (e) { console.error('[QE demo] init error', e); }
  }

  document.querySelectorAll('button[data-module="quick-exit"]').forEach(function (btn) {
    btn.addEventListener('click', function () { initFromButton(btn); });
  });
})();
</script>
{{/_layout-container}}

<script src="/docs/js/docs.js"></script>